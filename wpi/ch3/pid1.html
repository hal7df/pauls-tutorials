
 



 



<html>
 <head>
 <title>WPI_Lesson8</title>
 </head>
 <body>
 




<div id="wikipage">
<table>
 <tr>
 
 
 <td style="vertical-align:top; padding-left:5px">
 
 <div id="wikiheader">
 
 <span style="font-size:120%;font-weight:bold">WPI_Lesson8</span>
 &nbsp;
 <div> 
 
 <i>PID Part 1 - PID Theory</i>
 
 
 
 <div id="wikiauthor" style="float:right">
 Updated <span title="Sat Dec 28 14:45:39 2013">
 Dec 28, 2013</span>
 
 by 

 <a class="userlink"
 href="/u/112633510208610089649/">hal...@gmail.com</a
>
 
 </div>
 </div>
 </div>
 
 <div id="wikicontent">
 <div class="vt" id="wikimaincol">
 <p>In review, you have studied the various components of the robot, how they appear in code, and how to use them. The next three lessons will teach you one of the most important aspects of WPILib and robot programming in general -- the PID. </p><p>The PID is split up into three parts here because of its complexity. It is EXTREMELY important (enough that it will distinguish you as an accomplished robot programmer) that you know how to create a PID in your program - so pay close attention. </p><p>Robot programming is not the only thing that uses the PID -- it is used heavily in the automotive industry (think cruise control). </p><p><i>Fun fact:</i> PID theory was developed by watching helmsmen steer a ship. </p><p><ul><li><a href="#What_is_a_PID?">What is a PID?</a></li><ul><li><a href="#Proportional">Proportional</a></li><li><a href="#Derivative">Derivative</a></li><li><a href="#Integral">Integral</a></li></ul><li><a href="#Review">Review</a></li><li><a href="#Activity">Activity</a></li></ul> </p><h1><a name="What_is_a_PID?"></a>What is a PID?<a href="#What_is_a_PID?" class="section_anchor"></a></h1><p>To put it simply: a PID is a method to control various motor outputs using sensor inputs in an intelligent manner. </p><p>A PID is implemented with a process or object known as the PID controller. It handles all of the necessary calculations in order to use a PID. </p><p>The PID runs based on something called a <i>setpoint</i>. The setpoint is where the PID controller is told to keep the sensor input value as constant as possible using the motor outputs it is given. For example, the cruise control in a car is told to keep the speed at a specific value (the setpoint), so it adjusts the output of the car&#x27;s engine to keep the speed constant. </p><p>The name &#x27;PID&#x27; comes from constants that are given to the PID controller that dictate the manner in which it adjusts the output of its motors:  </p><ul><li><strong>P</strong> roportional </li><li><strong>I</strong> ntegral  </li><li><strong>D</strong> erivative </li></ul><p>   In the descriptions of the constants below, the graphs effectively show a reading from a sensor over time, with the red line being the setpoint. The other lines are examples showing the reading over time given different constant values. </p><p>Just so you know: the PID is much more complex than what is explained here. Both the I and the D terms use calculus functions -- something very few reading this would know. If you want a more thorough explanation of PID theory, go <a href="http://en.wikipedia.org/wiki/PID_controller#PID_controller_theory" rel="nofollow">here</a>. </p><h2><a name="Proportional"></a>Proportional<a href="#Proportional" class="section_anchor"></a></h2><p>The proportional constant tells the PID controller to send an output <strong>in proportion</strong> to the error from the setpoint -- in other words, it multiplies the error from the setpoint by the proportional constant. Essentially, proportional control will provide more power to the output when presented with greater error. </p><p>Pure proportional control has a few problems. Firstly, if the error is significant, it tends to overshoot the setpoint, then moving back towards it. Secondly, if the proportional term is large enough, the system will not be able to respond as quickly to the changes in the desired output, and as such will lose stability. Finally, proportional control usually does not settle at the setpoint, but rather near it -- this is known as <i>steady-state error</i>. This occurs because the signal from the proportional control becomes neglectable, and the output does not change. </p><p><img src="http://newton.ex.ac.uk/teaching/cdhw/Feedback/Figs/ProportionalGraph.gif" title="Example of proportional control, showing increasing gain"></img> </p><h2><a name="Derivative"></a>Derivative<a href="#Derivative" class="section_anchor"></a></h2><p>Derivative control fixes two of the three problems with proportional control: overshoot and instability. </p><p>Derivative control studies how the error changes over time and lessens the rate of change in the output if the sensor readings are approaching the setpoint too quickly, allowing the output to reach the setpoint more gracefully. </p><p>A high derivative constant will dampen the output considerably, drastically increasing the settling time. </p><p>Note that derivative control is sensitive to sensor noise (slight changes in the value that are associated with a lack of precision and not movement), and may take unneccessary dampening action on the output. </p><p><img src="http://newton.ex.ac.uk/teaching/cdhw/Feedback/Figs/PDGraph.gif" title="Example of proportional and derivative control, showing increased dampening"></img> </p><h2><a name="Integral"></a>Integral<a href="#Integral" class="section_anchor"></a></h2><p>While derivative control eliminates overshoot and instability in the proportional control, it still does not eliminate the steady-state error, as the error is not changing, which satisfies derivative control. To fix this, integral control is used. </p><p>The integral constant looks at the average error in the system. As such, small, steady error (i.e. steady-state error) gradually accumulates over time and becomes more prominent to the integral controller. </p><p>Integral control adjusts the output such that the average error eventually reaches 0. </p><p><img src="http://newton.ex.ac.uk/teaching/cdhw/Feedback/Figs/PIDGraph.gif" title="Example of PID Control"></img> </p><h1><a name="Review"></a>Review<a href="#Review" class="section_anchor"></a></h1><p>Effectively, what you should remember about each of these terms is: </p><ul><li><strong>P</strong>: Proportionally adjusts the output of the system based on the error to make the sensor reading closer to the setpoint. </li><ul><li>Key term: <strong>P</strong> ower </li></ul><li><strong>I</strong>: Adjusts the output of the system based on the average error. </li><ul><li>Key term: (Fixing) Offset </li></ul><li><strong>D</strong>: Adjusts the output of the system based on how the error is currently changing. </li><ul><li>Key term: <strong>D</strong> ampening </li></ul></ul><h1><a name="Activity"></a>Activity<a href="#Activity" class="section_anchor"></a></h1><p>Download the <a href="https://hot67-programming-resources.googlecode.com/svn/trunk/tutorial/PIDSimulation.xls" rel="nofollow">PID Simulation</a> and open it. Play with the P, I and D constants and see how the output reacts to different values (the output is the red line, the setpoint is the blue line). </p><p>Try to accomplish the following: </p><ul><li>Minimize settling time (the time it takes to reach the setpoint) </li><li>Minimize overshoot </li><li>Minimize offset/steady-state error </li></ul><p><i>Simulation source: Carnegie Mellon University (<a href="http://www.cs.cmu.edu/afs/cs/academic/class/15494-s11/lectures/manipulation_with_friction_files/PID%20Simulation.xls" rel="nofollow">original file</a>)</i> </p><p><i>Image credit: University of Exeter</i> </p><p><table class="wikitable"><tr><td style="border: 1px solid #ccc; padding: 5px;"> ← <a href="/p/hot67-programming-resources/wiki/WPI_Lesson7">Lesson 7: Sensors and Information</a> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Lesson 8</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <a href="/p/hot67-programming-resources/wiki/WPI_Lesson9">Lesson 9: PID Part 2 - Implementing a PID </a> → </td></tr> </table></p>
 </div>
 </div>
 </td><tr>
</table>
 </div>



<script type="text/javascript" src="https://ssl.gstatic.com/codesite/ph/18133036155640238800/js/dit_scripts.js"></script>



 </body>
</html>

